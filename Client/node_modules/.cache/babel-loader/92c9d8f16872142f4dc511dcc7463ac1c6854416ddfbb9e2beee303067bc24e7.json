{"ast":null,"code":"import\"./CurrentServer.css\";import{useContext,useEffect,useState}from\"react\";import{LoginContext}from\"../contexts/LoginContext\";import{io}from\"socket.io-client\";import{useNavigate}from\"react-router-dom\";import Header from\"../Header/Header\";import{AllRoomsJoined}from\"./AllRoomsJoined.js\";import{getAllRoomsData}from\"./AllRoomsJoined.js\";import PublicRoomsCreated from\"./RoomOptions/PublicRoomsCreated\";import PrivateRoomsCreated from\"./RoomOptions/PrivateRoomsMade\";import RoomsToExplore from\"./RoomOptions/RoomsToExplore\";import SubscribedList from\"./RoomOptions/SubscribedList.js\";import ForumRoundedIcon from\"@mui/icons-material/ForumRounded\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const CurrentServers=()=>{const{setMainAccess,setSocket,socket,userLoginInfo}=useContext(LoginContext);const navigate=useNavigate();const doesUserExist=JSON.parse(sessionStorage.getItem(\"username\"));const[roomsJoined,setRoomsJoined]=useState([]);const mainRoom=1;const[newUserToggle,setNewUserToggle]=useState(true);const[roomsCreated,setRoomsCreated]=useState([]);const[allRoomsData,setAllRoomsData]=useState([]);const PORT=process.env.REACT_APP_API_URL||5000;const displayRooms=async()=>{if(doesUserExist){const allRooms=await AllRoomsJoined(doesUserExist?doesUserExist:userLoginInfo.username);setRoomsJoined(allRooms.roomsJoined);console.log(allRooms.roomsJoined);setRoomsCreated(allRooms.roomsCreated);console.log(allRooms.roomsJoined.length);if(allRooms.roomsJoined.length>0||allRooms.roomsCreated.length>0){setNewUserToggle(false);}}};const getAllDataForRooms=async()=>{const roomsData=await getAllRoomsData(doesUserExist?doesUserExist:userLoginInfo.username);console.log(roomsData);setAllRoomsData(roomsData);};const handleRoomButtonClick=roomNumber=>{setMainAccess(true);setSocket(io.connect(`/`),{reconnection:true,reconnectionAttempts:20,reconnectionDelay:2000});sessionStorage.setItem(\"lastRoom\",roomNumber.toString());return navigate(`/chatroom/${roomNumber}`);};useEffect(()=>{getAllDataForRooms();displayRooms();console.log(roomsJoined);console.log(allRoomsData);// eslint-disable-next-line\n},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{socket:socket,handleRoomButtonClick:handleRoomButtonClick}),/*#__PURE__*/_jsxs(\"div\",{className:`room-container`,children:[/*#__PURE__*/_jsx(\"div\",{className:newUserToggle?`main-room-wrapper new-user`:\"main-room-wrapper\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"room_item_wrapper\",children:[/*#__PURE__*/_jsx(\"h1\",{id:'header_in_current_servers',children:\"Chatty Chatter\"}),newUserToggle&&/*#__PURE__*/_jsx(\"em\",{id:'new_user_server_message',children:\"Create A hub to unlock the features!\"}),/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{className:\"main-room-button\",onClick:()=>handleRoomButtonClick(mainRoom),children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(ForumRoundedIcon,{}),\" \"]}),/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"p\",{children:\"Community-hub\"})]}),/*#__PURE__*/_jsx(SubscribedList,{handleRoomButtonClick:handleRoomButtonClick,roomsJoined:roomsJoined,username:userLoginInfo.username},roomsJoined._id)]}),/*#__PURE__*/_jsx(PublicRoomsCreated,{handleClick:handleRoomButtonClick,roomsCreated:roomsCreated,allRoomsData:allRoomsData},roomsCreated._id+\"16\"),/*#__PURE__*/_jsx(PrivateRoomsCreated,{handleClick:handleRoomButtonClick,roomsCreated:roomsCreated,allRoomsData:allRoomsData},roomsCreated._id+\"12\"),/*#__PURE__*/_jsx(RoomsToExplore,{handleClick:handleRoomButtonClick,roomsCreated:roomsCreated},roomsCreated._id+\"1\")]})]})]});};export default CurrentServers;","map":{"version":3,"names":["useContext","useEffect","useState","LoginContext","io","useNavigate","Header","AllRoomsJoined","getAllRoomsData","PublicRoomsCreated","PrivateRoomsCreated","RoomsToExplore","SubscribedList","ForumRoundedIcon","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CurrentServers","setMainAccess","setSocket","socket","userLoginInfo","navigate","doesUserExist","JSON","parse","sessionStorage","getItem","roomsJoined","setRoomsJoined","mainRoom","newUserToggle","setNewUserToggle","roomsCreated","setRoomsCreated","allRoomsData","setAllRoomsData","PORT","process","env","REACT_APP_API_URL","displayRooms","allRooms","username","console","log","length","getAllDataForRooms","roomsData","handleRoomButtonClick","roomNumber","connect","reconnection","reconnectionAttempts","reconnectionDelay","setItem","toString","children","className","id","onClick","_id","handleClick"],"sources":["C:/Users/Tanner/Desktop/Chatty-Chatter/Chatty_Chatter/Client/src/components/currentServers/CurrentServers.js"],"sourcesContent":["import \"./CurrentServer.css\";\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport { LoginContext } from \"../contexts/LoginContext\";\r\nimport { io } from \"socket.io-client\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Header from \"../Header/Header\";\r\nimport { AllRoomsJoined } from \"./AllRoomsJoined.js\";\r\nimport { getAllRoomsData } from \"./AllRoomsJoined.js\";\r\nimport PublicRoomsCreated from \"./RoomOptions/PublicRoomsCreated\";\r\nimport PrivateRoomsCreated from \"./RoomOptions/PrivateRoomsMade\";\r\nimport RoomsToExplore from \"./RoomOptions/RoomsToExplore\";\r\nimport SubscribedList from \"./RoomOptions/SubscribedList.js\";\r\nimport ForumRoundedIcon from \"@mui/icons-material/ForumRounded\";\r\nconst CurrentServers = () => {\r\n  const { setMainAccess, setSocket, socket, userLoginInfo } =\r\n    useContext(LoginContext);\r\n  const navigate = useNavigate();\r\n  const doesUserExist = JSON.parse(sessionStorage.getItem(\"username\"));\r\n  const [roomsJoined, setRoomsJoined] = useState([]);\r\n  const mainRoom = 1;\r\n  const [newUserToggle, setNewUserToggle] = useState(true);\r\n  const [roomsCreated, setRoomsCreated] = useState([]);\r\n  const [allRoomsData, setAllRoomsData] =useState([])\r\n  const PORT = process.env.REACT_APP_API_URL || 5000;\r\n\r\n  const displayRooms = async () => {\r\n    if (doesUserExist) {\r\n      const allRooms = await AllRoomsJoined(\r\n        doesUserExist ? doesUserExist : userLoginInfo.username\r\n      );\r\n      setRoomsJoined(allRooms.roomsJoined);\r\n      console.log(allRooms.roomsJoined);\r\n      setRoomsCreated(allRooms.roomsCreated);\r\n\r\n      console.log(allRooms.roomsJoined.length);\r\n\r\n      if (allRooms.roomsJoined.length > 0 || allRooms.roomsCreated.length > 0) {\r\n        setNewUserToggle(false);\r\n      }\r\n    }\r\n  }; \r\n  const getAllDataForRooms =async()=>{\r\n    const roomsData = await getAllRoomsData(doesUserExist? doesUserExist: userLoginInfo.username)\r\n   console.log(roomsData)\r\n      setAllRoomsData(roomsData)\r\n    \r\n  }\r\n  const handleRoomButtonClick = (roomNumber) => {\r\n    setMainAccess(true);\r\n    setSocket(io.connect(`/`), {\r\n      reconnection: true,\r\n      reconnectionAttempts: 20,\r\n      reconnectionDelay: 2000,\r\n    });\r\n    sessionStorage.setItem(\"lastRoom\", roomNumber.toString());\r\n    return navigate(`/chatroom/${roomNumber}`);\r\n  };\r\n\r\n  useEffect(() => {\r\n    getAllDataForRooms();\r\n    displayRooms();\r\n    console.log(roomsJoined);\r\n    console.log(allRoomsData)\r\n\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <Header socket={socket} handleRoomButtonClick={handleRoomButtonClick} />\r\n      <div className={`room-container`}>\r\n        <div\r\n          className={\r\n            newUserToggle ? `main-room-wrapper new-user` : \"main-room-wrapper\"\r\n          }></div>\r\n\r\n        <div className={\"room_item_wrapper\"}>\r\n          <h1 id={'header_in_current_servers'}>Chatty Chatter</h1>\r\n          {newUserToggle && (\r\n            <em id={'new_user_server_message'}>\r\n              Create A hub to unlock the features!\r\n            </em>\r\n          )}\r\n          {\r\n            <>\r\n              <button\r\n                className={\"main-room-button\"}\r\n                onClick={() => handleRoomButtonClick(mainRoom)}>\r\n                <span><ForumRoundedIcon/> </span> \r\n                <br></br> <p>Community-hub</p>\r\n              </button>\r\n              <SubscribedList\r\n                key={roomsJoined._id}\r\n                handleRoomButtonClick={handleRoomButtonClick}\r\n                roomsJoined={roomsJoined}\r\n                username={userLoginInfo.username}\r\n              />\r\n            </>\r\n          }\r\n\r\n          {\r\n            <PublicRoomsCreated\r\n              key={roomsCreated._id + \"16\"}\r\n              handleClick={handleRoomButtonClick}\r\n              roomsCreated={roomsCreated}\r\n              allRoomsData={allRoomsData}\r\n            />\r\n          }\r\n          {\r\n            <PrivateRoomsCreated\r\n              key={roomsCreated._id + \"12\"}\r\n              handleClick={handleRoomButtonClick}\r\n              roomsCreated={roomsCreated}\r\n              allRoomsData={allRoomsData}\r\n            />\r\n          }\r\n          {\r\n            <RoomsToExplore\r\n              key={roomsCreated._id + \"1\"}\r\n              handleClick={handleRoomButtonClick}\r\n              roomsCreated={roomsCreated}\r\n            />\r\n          }\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\nexport default CurrentServers;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}