{"ast":null,"code":"import styles from\"./PrivateRoomAccess.module.css\";import Visibility from\"@mui/icons-material/Visibility\";import VisibilityOff from\"@mui/icons-material/VisibilityOff\";import{useState,useContext}from\"react\";import{LoginContext}from\"../contexts/LoginContext\";import axios from'axios';import Button from\"@mui/material/Button\";import{io}from\"socket.io-client\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const PrivateRoomAccess=_ref=>{let{roomData,setIsPrivateRoom}=_ref;const{setMainAccess,setSocket,userLoginInfo}=useContext(LoginContext);const PORT=process.env.REACT_APP_API_URL||5000;const[isPasswordVisible,setIsPasswordVisible]=useState(false);const[password,setPassword]=useState(\"\");const[isError,setIsError]=useState(false);const handlePasswordSubmit=async()=>{if(password===null||roomData.private_room_password===null||roomData.room_number===null){return setIsError(true);}axios.get(`/password_check/`,{params:{password:password,room:roomData.room_number,roomPassword:roomData.private_room_password,roomName:roomData.room_name,username:userLoginInfo.username}}).then(res=>{if(res.data.message==='success'){console.log('Access Granted');setIsError(false);setIsPrivateRoom(false);handlLoginSuccess(roomData.room_number);}else{console.log('we have an error');}}).catch(err=>{if(err.response&&err.response.status===404){setIsError(true);}else{console.log('an error occured in privateRoomAccess catch block');}});};const handlLoginSuccess=(room,event)=>{setMainAccess(true);setSocket(io.connect(`/`),{reconnection:true,reconnectionAttempts:20,reconnectionDelay:2000});sessionStorage.setItem(\"lastRoom\",room);};const handleOnChange=e=>{if(password===''||null){setIsError(false);}setPassword(e.target.value);};return/*#__PURE__*/_jsxs(\"div\",{className:`${styles.private_room_main_wrapper} ${isError?styles.errorClass:\"\"}`,children:[/*#__PURE__*/_jsx(\"p\",{id:styles.align_self,children:\"Password Required \"}),/*#__PURE__*/_jsxs(\"label\",{id:styles.password_input,htmlFor:\"passwordInput\",children:[isPasswordVisible?/*#__PURE__*/_jsx(Visibility,{id:styles.eye_ball,onClick:()=>setIsPasswordVisible(false),style:isError?{color:\"crimson\"}:{color:\"white\"}}):/*#__PURE__*/_jsx(VisibilityOff,{id:styles.eye_ball,onClick:()=>setIsPasswordVisible(true),style:isError?{color:\"maroon\"}:{color:\"white\"}}),/*#__PURE__*/_jsx(\"input\",{type:isPasswordVisible?\"text\":\"password\",onChange:e=>handleOnChange(e),placeholder:\" enter password\",id:\"passwordInput\"}),!isError&&/*#__PURE__*/_jsx(Button,{variant:\"outlined\",id:styles.submit_button,onClick:handlePasswordSubmit,children:\"Enter\"}),isError&&/*#__PURE__*/_jsx(Button,{variant:\"outlined\",id:styles.submit_button,color:\"error\",onClick:handlePasswordSubmit,children:\"Invalid\"})]})]});};export default PrivateRoomAccess;","map":{"version":3,"names":["styles","Visibility","VisibilityOff","useState","useContext","LoginContext","axios","Button","io","jsx","_jsx","jsxs","_jsxs","PrivateRoomAccess","_ref","roomData","setIsPrivateRoom","setMainAccess","setSocket","userLoginInfo","PORT","process","env","REACT_APP_API_URL","isPasswordVisible","setIsPasswordVisible","password","setPassword","isError","setIsError","handlePasswordSubmit","private_room_password","room_number","get","params","room","roomPassword","roomName","room_name","username","then","res","data","message","console","log","handlLoginSuccess","catch","err","response","status","event","connect","reconnection","reconnectionAttempts","reconnectionDelay","sessionStorage","setItem","handleOnChange","e","target","value","className","private_room_main_wrapper","errorClass","children","id","align_self","password_input","htmlFor","eye_ball","onClick","style","color","type","onChange","placeholder","variant","submit_button"],"sources":["C:/Users/Tanner/Desktop/Chatty-Chatter/Chatty_Chatter/Client/src/components/Utility-mainRoom/PrivateRoomAccess.js"],"sourcesContent":["import styles from \"./PrivateRoomAccess.module.css\";\r\nimport Visibility from \"@mui/icons-material/Visibility\";\r\nimport VisibilityOff from \"@mui/icons-material/VisibilityOff\";\r\nimport { useState, useContext } from \"react\";\r\nimport { LoginContext } from \"../contexts/LoginContext\";\r\nimport axios from 'axios';\r\nimport Button from \"@mui/material/Button\";\r\nimport { io } from \"socket.io-client\";\r\nconst PrivateRoomAccess = ({roomData, setIsPrivateRoom}) => {\r\n\tconst { setMainAccess, setSocket, userLoginInfo } =\r\n\tuseContext(LoginContext);\r\n  const PORT = process.env.REACT_APP_API_URL || 5000;\r\n\r\n\tconst [isPasswordVisible, setIsPasswordVisible] = useState(false);\r\n\tconst [password, setPassword] = useState(\"\");\r\n    const [isError, setIsError] = useState(false)\r\n\r\n    const handlePasswordSubmit = async() => {\r\n       \r\n       if(password === null || roomData.private_room_password=== null || roomData.room_number=== null){\r\n\t\treturn setIsError(true)\r\n\t   }\r\n        axios.get(`/password_check/`, {\r\n            params: {\r\n                password: password,\r\n                room: roomData.room_number,\r\n                roomPassword: roomData.private_room_password,\r\n\t\t\t\troomName: roomData.room_name,\r\n\t\t\t\tusername: userLoginInfo.username,\r\n                    }\r\n            })\r\n            .then((res) => {\r\n                if (res.data.message === 'success') {\r\n                    console.log('Access Granted')\r\n                    setIsError(false)\r\n                    setIsPrivateRoom(false)\r\n\t\t\t\t\thandlLoginSuccess(roomData.room_number)\r\n                } else {\r\n                    console.log('we have an error')\r\n                }\r\n            }).catch((err) => {\r\n                if (err.response && err.response.status === 404) {\r\n                    setIsError(true)\r\n                } else {\r\n                    console.log('an error occured in privateRoomAccess catch block')\r\n                }\r\n            })\r\n        \r\n        }\r\n\t\t const handlLoginSuccess = (room,event) => {\r\n      \r\n       setMainAccess(true);\r\n       setSocket(io.connect(`/`), {\r\n         reconnection: true,\r\n         reconnectionAttempts: 20,\r\n         reconnectionDelay: 2000,\r\n       });\r\n       sessionStorage.setItem(\"lastRoom\", room);\r\n     }; \r\n\t const handleOnChange =(e)=>{\r\n\t\tif(password === '' || null){\r\n\t\t\tsetIsError(false)\r\n\t\t}\r\n\t\tsetPassword(e.target.value)\r\n\t }\r\n\treturn (\r\n    <div\r\n      className={`${styles.private_room_main_wrapper} ${\r\n        isError ? styles.errorClass : \"\"\r\n      }`}>\r\n      <p id={styles.align_self}>Password Required </p>\r\n      <label id={styles.password_input} htmlFor={\"passwordInput\"}>\r\n        {isPasswordVisible ? (\r\n          <Visibility\r\n            id={styles.eye_ball}\r\n            onClick={() => setIsPasswordVisible(false)}\r\n            style={isError ? { color: \"crimson\" } : { color: \"white\" }}\r\n          />\r\n        ) : (\r\n          <VisibilityOff\r\n            id={styles.eye_ball}\r\n            onClick={() => setIsPasswordVisible(true)}\r\n            style={isError ? { color: \"maroon\" } : { color: \"white\" }}\r\n          />\r\n        )}\r\n\r\n        <input\r\n          type={isPasswordVisible ? \"text\" : \"password\"}\r\n          onChange={(e) => handleOnChange(e)}\r\n          placeholder=\" enter password\"\r\n          id={\"passwordInput\"}\r\n        />\r\n        {!isError && (\r\n          <Button\r\n            variant=\"outlined\"\r\n            id={styles.submit_button}\r\n            onClick={handlePasswordSubmit}>\r\n            Enter\r\n          </Button>\r\n        )}\r\n        {isError && (\r\n          <Button\r\n            variant=\"outlined\"\r\n            id={styles.submit_button}\r\n            color=\"error\"\r\n            onClick={handlePasswordSubmit}>\r\n            Invalid\r\n          </Button>\r\n        )}\r\n      </label>\r\n    </div>\r\n  );\r\n};\r\nexport default PrivateRoomAccess;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}